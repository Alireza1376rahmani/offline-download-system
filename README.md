# سامانه دانلود آفلاین

در اکثر دانشگاه‌های کشور مشکل سرعت و حجم کم برای دانشجویان وجود دارد این در حالیست که این قشر جامعه نیاز فراوانی به نرم افزار‌های به روز و پرحجم و همچنین ویدوئو ها و کتابهای آموزشی دارد که با سیستم دانلودآفلاین میتوانیم فایلهای مورد نیاز دانشجویان را در سریع ترین زمان و کمترین حجم ممکن در اختیارشان قرار دهیم و با هزینه صرفه جویی شده، اینترنت پرسرعت با حجم کم برای کارهای پژوهشی و وبگردی دانشجویان در نظر بگیریم.

برای برآورده کردن این اهداف، سامانه فایلهای مورد نیاز دانشجویان را بعنوان درخواست می‌گیرد و در زمانی که ادمین معین می‌کند شروع به دانلود آنها و ذخیره در فضای ذخیره سازی محلی می‌کند. پس از اتمام دانلود فایل هر درخواست، آن درخواست را در &#x202b;دسترس دیگر دانشجویان قرار میدهد. 


# معرفی ابزار ها و تکنولوژِ ها

ابزار¬ها و تکتولوژی¬های مختلفی در پیاده¬سازی این سیستم به کار گرفته شده¬اند که مهمترین آن¬ها شامل زبان برنامه¬نویسی جاوا اسکریپت برای طراحی قسمت سرور این سیستم، فریم¬ورک اکسپرس، زبان تمپلیت&#x202b; ejs  برای طراحی قسمت فرانت این سیستم، کتابخانه multer.js برای کار با عکس‌ها، معماری MVC و ابزار¬هایی از جمله VS Code و دیتابیس mongoDB می¬باشد.


# مقدمات پیاده¬سازی

برای شروع کار بر روی این سیستم لازم است ابتدا محیط برنامه¬نویسی&#x202b; VS Code ،node js و پایگاه داده¬ mongo نصب شوند و یک دیتابیس با نام odp در آن ساخته شود.
ابتدا توسط ابزار&#x202b; npm که یک نصب کننده و مدیریت کننده¬ی پکیج¬های مختلف node js ای است پکیج‌ها و ابزارهای مورد نیاز پروژه را نصب میکنیم. 
کتابخانه¬ها و ابزاری که در پروژه¬ استفاده شده است شامل&#x202b;:
&#x202b;-	Mongodb : برای اتصال و کار با دیتابیس
&#x202b;-	Express-session : کار با نشست ها و ذخیره آنها در دیتابیس به جای رم
&#x202b;-	Ejs : کار با فایلهای .ejs در بخش view
&#x202b;-	nodejs-file-downloader : دانلود فایلها و ذخیره در فضای ذخیره‌سازی
&#x202b;-	multer : آپلود و ذخیره عکس‌ها در سرور


برای  اجرای پروژه باید فایل&#x202b; db.js را ران کنیم. دلیل این امر این است که وقتی شروع به شنیدن درخواست‌ها میکنیم، دیتابیس آماده سرویس‌دهی باشد. از همین رو، اجرای سرور پس از برقراری ارتباط با پایگاه داده انجام می‌شود.
در فایل&#x202b; router.js با استفاده از خدماتی که خود express برای routing ارائه می‌کند، درخواست‌ها را به توابع مناسب در controller ها هدایت میکنیم. در این قسمت باید میان افزارهای authentication  و دیگر میان‌افزارها استفاده می‌شوند.
در فایلهای کنترلر نیز نمونه‌هایی از مدل ها میسازیم و توابع مورد نیاز را فراخوانی میکنیم و اطلاعات درخواست شده را برمی‌گردانیم و کاری که درخواستش داده شده را انجام می‌دهیم&#x202b;.
فایلهای پوشه&#x202b; model نیز شامل موجودیت‌های بعضا قابل مشاهده داخل پروژه هستند که هرکدام وظایف مخصوص خود را انجام می‌دهند. تمامی اتصالات و استفاده از دیتابیس در این فایلها  رخ می‌دهد.
پوشه&#x202b; public که شامل زیرپوشه میشود، کاملا توسط کاربر قابل مشاهده است و میتوان با url به آنها دسترسی داشت. در پوشه‌های style و js فایلهایی که در صفحات وب از آنها استفاده شده و به آنها لینک شده قرار دارند. در پوشه uploads ، عکس‌های آپلود شده برای پوستر پست‌ها یا پروفایل کاربران قرار دارد که بتوان به سادگی در تگ img به آنها دسترسی داشت.
همچنین پوشه&#x202b; downloads حاوی فایل‌های دانلود شده از اینترنت می‌باشد که در ازای درخواست کاربر، برایش ارسال خواهد شد. هر فایل دانلود شده در زیرپوشه‌ای قرار دارد که نامش، آیدی یکتای آن فایل در دیتابیس می‌باشد. این امر برای راحتتر بودن دسترسی به فایلهای هر درخواست است.


